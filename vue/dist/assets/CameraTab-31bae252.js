import{_ as h,k as d,r as a,o as _,c as m,f as t,q as r,s as p,a as v,d as x,l as o,S as w}from"./index-6db60074.js";const k={key:0,class:"mt-3"},N=["src"],T={__name:"CameraTab",setup(B){const n=d(null),s=d(!1);async function g(){var c;if(s.value){o("Camera capture already in progress...",{type:"warning"});return}s.value=!0;try{o("Capturing image...",{type:"info"});const e=await w.get("/camera/capture",{responseType:"arraybuffer",timeout:15e3}),l=btoa(new Uint8Array(e.data).reduce((i,u)=>i+String.fromCharCode(u),""));n.value=`data:image/jpeg;base64,${l}`,o("Image captured successfully!",{type:"success"})}catch(e){console.error("Error capturing image:",e),e.code==="ECONNABORTED"||e.message.includes("timeout")?o("Camera capture timed out - this might indicate the camera is busy or needs reset",{type:"error"}):((c=e.response)==null?void 0:c.status)===500?o("Camera error - please try rebooting the device",{type:"error"}):o("Failed to capture image - check camera connection",{type:"error"}),n.value=null}finally{s.value=!1}}return(c,e)=>{const l=a("v-icon"),i=a("v-btn"),u=a("v-col"),f=a("v-row"),y=a("v-card-title"),C=a("v-card-text"),b=a("v-card");return _(),m("div",null,[t(f,{class:"mt-3"},{default:r(()=>[t(u,{cols:"4"},{default:r(()=>[t(i,{color:"info",onClick:g,loading:s.value,disabled:s.value,size:"large"},{default:r(()=>[t(l,{size:"large"},{default:r(()=>e[0]||(e[0]=[p("mdi-camera")])),_:1}),e[1]||(e[1]=p(" Capture Photo "))]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),n.value?(_(),m("div",k,[t(b,null,{default:r(()=>[t(y,null,{default:r(()=>e[2]||(e[2]=[v("span",{class:"text-h6"},"Latest Captured Image",-1)])),_:1}),t(C,null,{default:r(()=>[v("img",{src:n.value,class:"img-fluid",style:{"max-width":"100%",height:"auto"}},null,8,N)]),_:1})]),_:1})])):x("",!0)])}}},I=h(T,[["__scopeId","data-v-d018988a"]]);export{I as default};
