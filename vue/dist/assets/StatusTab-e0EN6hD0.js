import{_ as E,l as p,c as _,g as o,w as n,b as f,f as T,r as d,o as b,h as l,F as V,d as $,t as L,H as i}from"./index-CrZdaWF5.js";const S={key:0,class:"mt-3"},h=["src"],U=["innerHTML"],B={__name:"StatusTab",setup(N){const v=p(""),u=p(null),m=p("html");async function y(){try{const t=await i.get("/download_db",{responseType:"blob"}),e=new Blob([t.data],{type:"application/octet-stream"}),a=document.createElement("a");a.href=URL.createObjectURL(e),a.download=document.title+"_replifactory.db",document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(t){console.error("Error downloading database:",t)}}async function w(){try{const t=await i.get("/status");v.value=`<pre>${JSON.stringify(t.data,null,2)}</pre>`}catch(t){console.error("Error fetching status:",t)}}async function C(t,e){try{const a=await i.get(`/export/${t}/${e}`,{responseType:"blob"}),s=new Blob([a.data],{type:"application/octet-stream"}),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=`vial_${t}_data.${e}`,document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(a){console.error(`Error exporting data for vial ${t}:`,a)}}async function k(){try{const t=await i.get("/capture",{responseType:"arraybuffer"}),e=btoa(new Uint8Array(t.data).reduce((a,s)=>a+String.fromCharCode(s),""));u.value=`data:image/jpeg;base64,${e}`}catch(t){console.error("Error capturing image:",t)}}return(t,e)=>{const a=d("v-icon"),s=d("v-btn"),r=d("v-col"),g=d("v-row"),x=d("v-select");return b(),_("div",null,[o(g,{class:"mt-3"},{default:n(()=>[o(r,{cols:"4"},{default:n(()=>[o(s,{color:"info",onClick:k},{default:n(()=>[o(a,{size:"large"},{default:n(()=>e[1]||(e[1]=[l("mdi-camera")])),_:1}),e[2]||(e[2]=l(" Photo "))]),_:1})]),_:1}),o(r,{cols:"4"},{default:n(()=>[o(s,{color:"success",onClick:y},{default:n(()=>[o(a,{size:"large"},{default:n(()=>e[3]||(e[3]=[l("mdi-cloud-download")])),_:1}),e[4]||(e[4]=l(" Download Database "))]),_:1})]),_:1}),o(r,{cols:"4"},{default:n(()=>[o(s,{color:"primary",onClick:w},{default:n(()=>[o(a,{size:"large"},{default:n(()=>e[5]||(e[5]=[l("mdi-information")])),_:1}),e[6]||(e[6]=l(" Status "))]),_:1})]),_:1})]),_:1}),o(g,{class:"mt-3",align:"center"},{default:n(()=>[o(r,{cols:"3",class:"text-right"},{default:n(()=>e[7]||(e[7]=[f("strong",null,"Export Data",-1)])),_:1}),o(r,{cols:"3"},{default:n(()=>[o(x,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=c=>m.value=c),items:["csv","html"],label:"Select Format",dense:""},null,8,["modelValue"])]),_:1}),o(r,{cols:"6"},{default:n(()=>[(b(),_(V,null,$(7,c=>o(s,{key:"vial"+c,color:"info",class:"mr-1 mb-1",onClick:D=>C(c,m.value)},{default:n(()=>[l(" Vial "+L(c),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1}),u.value?(b(),_("div",S,[f("img",{src:u.value,class:"img-fluid"},null,8,h)])):T("",!0),f("div",{class:"mt-3",innerHTML:v.value},null,8,U)])}}},R=E(B,[["__scopeId","data-v-4ee7f71e"]]);export{R as default};
