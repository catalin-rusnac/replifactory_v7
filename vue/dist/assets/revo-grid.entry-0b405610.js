import{r as O,c,g as V,t as E,a as z,b as H,d as S,G as T,S as D,i as j,A as B,F,E as A,e as N,C as M,f as $,h as v,H as U,j as Y,k as w,D as k,l as y,m as R,n as X,o as L,s as G,p as W,q,u as K,R as Z,v as J,w as Q,x as ee,y as re,B as te,z as oe,I as ie}from"./VialPlot-45a74ff0.js";import{H as I,D as se,v as ne,C as ae,F as de}from"./viewport.helpers-B3EYGhqf-209ef02f.js";import{g as P}from"./events-BvSmBueA-09314f63.js";import"./index-626bd695.js";import"./plotly-afc049ba.js";/*!
 * Built by Revolist OU ❤️
 */class le{constructor(){this.defaultRowSize=32}}class ce{constructor(){this.defaultRowSize=27}}class he{constructor(){this.defaultRowSize=42}}const _="default",ge=[_,"material","compact","darkMaterial","darkCompact"];class ve{get theme(){return this.currentTheme}get rowSize(){return this.customRowSize||this.currentTheme.defaultRowSize}set rowSize(e){this.customRowSize=e}constructor(e){this.customRowSize=0,this.customRowSize=e.rowSize,this.register("default")}register(e){switch(ue(e)){case"material":case"darkMaterial":this.currentTheme=new he;break;case"compact":case"darkCompact":this.currentTheme=new le;break;default:this.currentTheme=new ce;break}}}function ue(t){return t&&ge.indexOf(t)>-1?t:_}class pe{get stores(){return this.dataSources}constructor(){this.collection=null,this.dataSources=w.reduce((e,r)=>(e[r]=new k(r),e),{})}column(e,r="rgCol"){return this.getColumn(e,r)}getColumn(e,r){return y(this.dataSources[r].store,e)}getRawColumns(){return R(this.dataSources,(e,r,o)=>(e[o]=r.store.get("source"),e),{rgCol:[],colPinStart:[],colPinEnd:[]})}getColumns(e="all"){const r=this.getRawColumns();return e!=="all"?r[e]:w.reduce((o,i)=>[...o,...r[i]],[])}getColumnIndexByProp(e,r){return X(this.dataSources[r].store,e)}getColumnByProp(e){var r;return(r=this.collection)===null||r===void 0?void 0:r.columnByProp[e]}refreshByType(e){this.dataSources[e].refresh()}setColumns(e){return w.forEach(r=>{this.dataSources[r].updateData(e.columns[r],{depth:e.maxLevel,groups:e.columnGrouping[r].reduce((o,i)=>(o[i.level]||(o[i.level]=[]),o[i.level].push(i),o),{})})}),this.collection=e,e}updateColumns(e){const r=e.reduce((i,s)=>{const n=L(s);return i[n]||(i[n]={}),i[n][s.prop]=s,i},{}),o={};for(const i in r){if(!r.hasOwnProperty(i))continue;const s=i,n=r[s],l=this.dataSources[s].store.get("source");o[s]={};for(let d=0;d<l.length;d++){const g=l[d],a=n==null?void 0:n[g.prop];a&&(o[s][d]=a)}}for(const i in o){if(!o.hasOwnProperty(i))continue;const s=i;G(this.dataSources[s].store,o[s]||{})}}updateColumn(e,r){const o=L(e);W(this.dataSources[o].store,{[r]:e})}}class me{constructor(e){this.dimensionProvider=e,this.stores=R(S,(r,o)=>(r[o]=new k(o),r),{})}setData(e,r="rgRow",o=!1,i,s=!1){this.stores[r].updateData([...e],i,s);const n=r!=="rgRow"||o;return this.dimensionProvider.setData(e.length,r,n),e}getModel(e,r="rgRow"){const o=this.stores[r].store;return y(o,e)}changeOrder({rowType:e="rgRow",from:r,to:o}){const i=this.stores[e],s=[...i.store.get("proxyItems")],n=i.store.get("items"),l=s.splice(s.indexOf(n[r]),1);s.splice(s.indexOf(n[o]),0,...l),i.setData({proxyItems:s});const d=i.store.get("items");this.dimensionProvider.updateSizesPositionByNewDataIndexes(e,d,n)}setCellData({type:e,rowIndex:r,prop:o,val:i},s=!0){const n=this.getModel(r,e);n[o]=i,this.stores[e].setSourceData({[r]:n},s)}setRangeData(e,r){const o={};for(let i in e){const s=o[i]=y(this.stores[r].store,parseInt(i,10));if(s)for(let n in e[i])s[n]=e[i][n]}this.stores[r].setSourceData(o)}refresh(e="all"){q(e)&&this.refreshItems(e),S.forEach(r=>this.refreshItems(r))}refreshItems(e="rgRow"){const r=this.stores[e].store.get("items");this.stores[e].setData({items:[...r]})}setGrouping({depth:e},r="rgRow"){this.stores[r].setData({groupingDepth:e})}setTrimmed(e,r="rgRow"){const o=this.stores[r];o.addTrimmed(e),this.dimensionProvider.setTrimmed(e,r),r==="rgRow"&&this.dimensionProvider.setData(z(o.store).length,r)}}class fe{constructor(e,r){this.viewports=e;const o=K(i=>r.realSizeChanged(i),Z);this.stores=R([...S,...w],(i,s)=>(i[s]=new oe(s),i[s].store.onChange("realSize",()=>o(s)),i),{})}clearSize(e,r){this.stores[e].drop(),this.viewports.stores[e].setOriginalSizes(this.stores[e].store.get("originItemSize")),this.setItemCount(r,e)}setCustomSizes(e,r,o=!1){let i=r;if(o){const s=this.stores[e].store.get("sizes");i=Object.assign(Object.assign({},s),r)}this.stores[e].setDimensionSize(i),this.setViewPortCoordinate({type:e,force:!0})}setItemCount(e,r){this.viewports.stores[r].setViewport({realCount:e}),this.stores[r].setStore({count:e})}setTrimmed(e,r){const o=J(e);this.stores[r].setStore({trimmed:o}),this.setViewPortCoordinate({type:r,force:!0})}setData(e,r,o=!1){if(this.setItemCount(e,r),o){const i=this.stores[r].getCurrentState();this.viewports.stores[r].setViewport({virtualSize:i.realSize})}this.setViewPortCoordinate({type:r})}applyNewColumns(e,r,o=!1){for(let i of w){o||this.stores[i].drop();const s=e[i],n=i!=="rgCol"||r;this.stores[i].setStore({count:s.length});const l=Q(s);this.stores[i].setDimensionSize(l);const d={realCount:s.length};n&&(d.virtualSize=this.stores[i].getCurrentState().realSize),this.viewports.stores[i].setViewport(d),this.setViewPortCoordinate({type:i})}}getFullSize(){var e,r;let o=0,i=0;for(let s of w)o+=((e=this.stores[s])===null||e===void 0?void 0:e.store.get("realSize"))||0;for(let s of S)i+=((r=this.stores[s])===null||r===void 0?void 0:r.store.get("realSize"))||0;return{y:i,x:o}}setViewPortCoordinate({type:e,coordinate:r=this.viewports.stores[e].lastCoordinate,force:o=!1}){const i=this.stores[e].getCurrentState();this.viewports.stores[e].setViewPortCoordinate(r,i,o)}getViewPortPos(e){const r=this.stores[e.dimension].getCurrentState();return ee(r,e.coordinate).start}setSettings(e,r){let o=[];switch(r){case"rgCol":o=w;break;case"rgRow":o=S;break}for(let i of o)this.stores[i].setStore(e)}updateSizesPositionByNewDataIndexes(e,r,o=[]){this.stores[e].updateSizesPositionByIndexes(r,o),this.setViewPortCoordinate({type:e,force:!0})}}class we{constructor(){this.stores=R([...S,...w],(e,r)=>(e[r]=new ie(r),e),{})}setViewport(e,r){this.stores[e].setViewport(r)}}function be(t){const e=t.dimensions[t.colType].store,r=e.get("realSize"),o={contentWidth:r,class:t.colType,contentHeight:t.contentHeight,key:t.colType,colType:t.colType,onResizeviewport:t.onResizeviewport,style:t.fixWidth?{minWidth:`${r}px`}:void 0},i={colData:z(t.colStore),dimensionCol:e,type:t.colType,groups:t.colStore.get("groups"),groupingDepth:t.colStore.get("groupingDepth"),resizeHandler:t.colType==="colPinEnd"?["l"]:void 0,onHeaderresize:t.onHeaderresize};return{prop:o,type:t.colType,position:t.position,headerProp:i,viewportCol:t.viewports[t.colType].store}}class Ce{constructor(e,r){var o,i;this.config=e,(o=this.config.selectionStoreConnector)===null||o===void 0||o.beforeUpdate();const s=[];let n=0;w.forEach(l=>{const d=e.columnProvider.stores[l].store;if(!d.get("items").length)return;const g={colType:l,position:{x:n,y:1},contentHeight:r,fixWidth:l!=="rgCol",viewports:e.viewportProvider.stores,dimensions:e.dimensionProvider.stores,rowStores:e.dataProvider.stores,colStore:d,onHeaderresize:h=>this.onColumnResize(l,h,d)};l==="rgCol"&&(g.onResizeviewport=h=>{var m;const f={clientSize:h.detail.size};(h.detail.dimension==="rgRow"&&!e.disableVirtualY||h.detail.dimension==="rgCol"&&!e.disableVirtualX)&&(f.virtualSize=h.detail.size),(m=e.viewportProvider)===null||m===void 0||m.setViewport(h.detail.dimension,f)});const a=be(g),u=this.registerCol(a.position.x,l),x=this.dataViewPort(g).reduce((h,m)=>{const f=this.registerSegment(m.position);f.setLastCell(m.lastCell);const p=this.registerRow(m.position.y,m.type),b=Object.assign(Object.assign({colType:l},m),{rowSelectionStore:p,selectionStore:f.store,ref:C=>e.selectionStoreConnector.registerSection(C),onSetrange:C=>{f.setRangeArea(C.detail)},onSettemprange:C=>f.setTempArea(C.detail),onFocuscell:C=>{f.clearFocus(),e.selectionStoreConnector.focus(f,C.detail)}});return h.push(b),h},[]);s.push(Object.assign(Object.assign({},a),{columnSelectionStore:u,dataPorts:x})),n++}),this.columns=s,(i=this.config.scrollingService)===null||i===void 0||i.unregister()}onColumnResize(e,{detail:r},o){var i;(i=this.config.dimensionProvider)===null||i===void 0||i.setCustomSizes(e,r,!0);const s={};for(const[n,l]of Object.entries(r||{})){const d=parseInt(n,10),g=y(o,d);g&&(s[d]=Object.assign(Object.assign({},g),{size:l}))}this.config.resize(s)}registerSegment(e){return this.config.selectionStoreConnector.register(e)}registerRow(e,r){return this.config.selectionStoreConnector.registerRow(e,r).store}registerCol(e,r){return this.config.selectionStoreConnector.registerColumn(e,r).store}dataViewPort(e){const r={rowPinStart:I,rgRow:ae,rowPinEnd:de};let o=0;return S.reduce((i,s)=>{const n=e.viewports[s].store.get("realCount")||s==="rgRow",l=Object.assign(Object.assign({},e),{position:Object.assign(Object.assign({},e.position),{y:n?o:re})}),d=ne(l,s,r[s],s!=="rgRow");return i.push(d),n&&o++,i},[])}scrollToCell(e){for(let r in e){const o=e[r];typeof o=="number"&&this.config.scrollingService.proxyScroll({dimension:r==="x"?"rgCol":"rgRow",coordinate:o})}}clearFocused(){this.config.selectionStoreConnector.clearAll()}clearEdit(){this.config.selectionStoreConnector.setEdit(!1)}getFocused(){const e=this.config.selectionStoreConnector.focusedStore;if(!e)return null;const r=this.config.selectionStoreConnector.storesXToType[e.position.x],o=this.config.columnProvider.getColumn(e.cell.x,r),i=this.config.selectionStoreConnector.storesYToType[e.position.y],s=this.config.dataProvider.getModel(e.cell.y,i);return{column:o,model:s,cell:e.cell,colType:r,rowType:i}}getStoreCoordinateByType(e,r){const o=this.config.selectionStoreConnector.storesByType;if(!(typeof o[e]>"u"||typeof o[r]>"u"))return{x:o[e],y:o[r]}}setFocus(e,r,o,i){var s;const n=this.getStoreCoordinateByType(e,r);n&&((s=this.config.selectionStoreConnector)===null||s===void 0||s.focusByCell(n,o,i))}getSelectedRange(){const e=this.config.selectionStoreConnector.focusedStore;if(!e)return null;const r=this.config.selectionStoreConnector.storesXToType[e.position.x],o=this.config.selectionStoreConnector.storesYToType[e.position.y],i=e.entity.store.get("range");return i?Object.assign(Object.assign({},i),{colType:r,rowType:o}):null}setEdit(e,r,o,i){var s;const n=this.getStoreCoordinateByType(o,i);n&&((s=this.config.selectionStoreConnector)===null||s===void 0||s.setEditByCell(n,{x:r,y:e}))}}class Se{constructor(e){this.setViewport=e,this.elements={}}async proxyScroll(e,r){var o;let i,s=e;for(let l in this.elements)if(!(e.dimension==="rgCol"&&l==="headerRow"))if(this.isPinnedColumn(r)&&e.dimension==="rgCol"){if(l===r||!e.delta)continue;for(let d of this.elements[l])d.changeScroll&&(i=d.changeScroll(e))}else for(let d of this.elements[l])await((o=d.setScroll)===null||o===void 0?void 0:o.call(d,e));const n=await i;n&&(s=n),this.setViewport(s)}async scrollSilentService(e,r){var o;for(let i in this.elements)if(i!==r&&w.includes(r)&&(i==="headerRow"||w.includes(i))){for(let s of this.elements[i])await((o=s.changeScroll)===null||o===void 0?void 0:o.call(s,e,!0));continue}}isPinnedColumn(e){return!!e&&["colPinStart","colPinEnd"].indexOf(e)>-1}registerElements(e){this.elements=e}registerElement(e,r){this.elements[r]||(this.elements[r]=[]),e?this.elements[r].push(e):this.elements[r]&&delete this.elements[r]}unregister(){this.elements={}}}class xe{constructor(){this.parentY=0}start(e,{pos:r,text:o,event:i}){var s;const{top:n}=e.getBoundingClientRect();this.parentY=n,this.text&&(this.text.innerText=o),this.move(r),this.moveTip({x:i.x,y:i.y}),(s=this.el)===null||s===void 0||s.classList.remove("hidden")}end(){var e;(e=this.el)===null||e===void 0||e.classList.add("hidden")}move(e){this.moveElement(e.end-this.parentY)}moveTip({x:e,y:r}){this.draggable&&(this.draggable.style.left=`${e}px`,this.draggable.style.top=`${r}px`)}moveElement(e){this.rgRow&&(this.rgRow.style.transform=`translateY(${e}px)`)}}const Pe=({ref:t})=>{const e=new xe;return t(e),v("div",{class:"draggable-wrapper hidden",ref:r=>e.el=r},v("div",{class:"draggable",ref:r=>e.draggable=r},v("span",{class:"revo-alt-icon"}),v("span",{ref:r=>e.text=r})),v("div",{class:"drag-position",ref:r=>e.rgRow=r}))},ye=(t=[])=>{const e={};for(const r of t){let o=e[r.type];o||(o=e[r.type]={}),r.size&&(o.sizes||(o.sizes={}),o.sizes[r.index]=r.size)}return e},Re=(t=[])=>{const e={};for(const r of t){let o=e[r.type];o||(o=e[r.type]=[]),r.size&&o.push(r.index)}return e};function ze(){return/Mobi/i.test(navigator.userAgent)||/Android/i.test(navigator.userAgent)||navigator.maxTouchPoints>0}class Ee extends te{constructor(e,r){super(e,r),e.setAttribute("dir","ltr"),e.setAttribute("role","treegrid"),e.setAttribute("aria-keyshortcuts","Enter"),e.setAttribute("aria-multiselectable","true"),e.setAttribute("tabindex","0"),this.addEventListener("beforecolumnsset",({detail:o})=>{const i=[...o.columns.colPinStart,...o.columns.rgCol,...o.columns.colPinEnd];e.setAttribute("aria-colcount",`${i.length}`),i.forEach((s,n)=>{const{columnProperties:l,cellProperties:d}=s;s.columnProperties=(...g)=>{const a=(l==null?void 0:l(...g))||{};return a.role="columnheader",a["aria-colindex"]=`${n}`,a},s.cellProperties=(...g)=>{const a={role:"gridcell","aria-colindex":`${n}`,"aria-rowindex":`${g[0].rowIndex}`,tabindex:-1},u=(d==null?void 0:d(...g))||{};return Object.assign(Object.assign({},a),u)}})}),this.addEventListener("beforesourceset",({detail:o})=>{e.setAttribute("aria-rowcount",`${o.source.length}`)}),this.addEventListener("beforerowrender",({detail:o})=>{o.node.$attrs$=Object.assign(Object.assign({},o.node.$attrs$),{role:"row","aria-rowindex":o.item.itemIndex})}),this.addEventListener("afterfocus",async o=>{if(o.defaultPrevented)return;const i=this.revogrid.querySelector(`revogr-data[type="${o.detail.rowType}"][col-type="${o.detail.colType}"] [data-rgrow="${o.detail.rowIndex}"][data-rgcol="${o.detail.colIndex}"]`);i instanceof HTMLElement&&i.focus()})}}class Te{constructor(){this.internalPlugins=[]}get(){return[...this.internalPlugins]}add(e){this.internalPlugins.push(e)}addUserPluginsAndCreate(e,r=[],o,i){if(!i)return;((o==null?void 0:o.filter(n=>!r.some(l=>l===n)))||[]).forEach(n=>{var l,d;const g=this.internalPlugins.findIndex(a=>a instanceof n);g!==-1&&((d=(l=this.internalPlugins[g]).destroy)===null||d===void 0||d.call(l),this.internalPlugins.splice(g,1))}),r==null||r.forEach(n=>{this.internalPlugins.find(d=>d instanceof n)||this.add(new n(e,i))})}getByClass(e){return this.internalPlugins.find(r=>r instanceof e)}remove(e){var r,o;const i=this.internalPlugins.indexOf(e);i>-1&&((o=(r=this.internalPlugins[i]).destroy)===null||o===void 0||o.call(r),this.internalPlugins.splice(i,1))}destroy(){this.internalPlugins.forEach(e=>{var r;return(r=e.destroy)===null||r===void 0?void 0:r.call(e)}),this.internalPlugins=[]}}const De=`.revo-drag-icon{width:11px;opacity:0.8}.revo-drag-icon::before{content:"::"}.revo-alt-icon{-webkit-mask-image:url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg viewBox='0 0 384 383' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg%3E%3Cpath d='M192.4375,383 C197.424479,383 201.663411,381.254557 205.154297,377.763672 L205.154297,377.763672 L264.25,318.667969 C270.234375,312.683594 271.605794,306.075846 268.364258,298.844727 C265.122721,291.613607 259.51237,287.998047 251.533203,287.998047 L251.533203,287.998047 L213.382812,287.998047 L213.382812,212.445312 L288.935547,212.445312 L288.935547,250.595703 C288.935547,258.57487 292.551107,264.185221 299.782227,267.426758 C307.013346,270.668294 313.621094,269.296875 319.605469,263.3125 L319.605469,263.3125 L378.701172,204.216797 C382.192057,200.725911 383.9375,196.486979 383.9375,191.5 C383.9375,186.513021 382.192057,182.274089 378.701172,178.783203 L378.701172,178.783203 L319.605469,119.6875 C313.621094,114.201823 307.013346,112.955078 299.782227,115.947266 C292.551107,118.939453 288.935547,124.42513 288.935547,132.404297 L288.935547,132.404297 L288.935547,170.554688 L213.382812,170.554688 L213.382812,95.0019531 L251.533203,95.0019531 C259.51237,95.0019531 264.998047,91.3863932 267.990234,84.1552734 C270.982422,76.9241536 269.735677,70.3164062 264.25,64.3320312 L264.25,64.3320312 L205.154297,5.23632812 C201.663411,1.74544271 197.424479,0 192.4375,0 C187.450521,0 183.211589,1.74544271 179.720703,5.23632812 L179.720703,5.23632812 L120.625,64.3320312 C114.640625,70.3164062 113.269206,76.9241536 116.510742,84.1552734 C119.752279,91.3863932 125.36263,95.0019531 133.341797,95.0019531 L133.341797,95.0019531 L171.492188,95.0019531 L171.492188,170.554688 L95.9394531,170.554688 L95.9394531,132.404297 C95.9394531,124.42513 92.3238932,118.814779 85.0927734,115.573242 C77.8616536,112.331706 71.2539062,113.703125 65.2695312,119.6875 L65.2695312,119.6875 L6.17382812,178.783203 C2.68294271,182.274089 0.9375,186.513021 0.9375,191.5 C0.9375,196.486979 2.68294271,200.725911 6.17382812,204.216797 L6.17382812,204.216797 L65.2695312,263.3125 C71.2539062,268.798177 77.8616536,270.044922 85.0927734,267.052734 C92.3238932,264.060547 95.9394531,258.57487 95.9394531,250.595703 L95.9394531,250.595703 L95.9394531,212.445312 L171.492188,212.445312 L171.492188,287.998047 L133.341797,287.998047 C125.36263,287.998047 119.876953,291.613607 116.884766,298.844727 C113.892578,306.075846 115.139323,312.683594 120.625,318.667969 L120.625,318.667969 L179.720703,377.763672 C183.211589,381.254557 187.450521,383 192.4375,383 Z'%3E%3C/path%3E%3C/g%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg viewBox='0 0 384 383' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg%3E%3Cpath d='M192.4375,383 C197.424479,383 201.663411,381.254557 205.154297,377.763672 L205.154297,377.763672 L264.25,318.667969 C270.234375,312.683594 271.605794,306.075846 268.364258,298.844727 C265.122721,291.613607 259.51237,287.998047 251.533203,287.998047 L251.533203,287.998047 L213.382812,287.998047 L213.382812,212.445312 L288.935547,212.445312 L288.935547,250.595703 C288.935547,258.57487 292.551107,264.185221 299.782227,267.426758 C307.013346,270.668294 313.621094,269.296875 319.605469,263.3125 L319.605469,263.3125 L378.701172,204.216797 C382.192057,200.725911 383.9375,196.486979 383.9375,191.5 C383.9375,186.513021 382.192057,182.274089 378.701172,178.783203 L378.701172,178.783203 L319.605469,119.6875 C313.621094,114.201823 307.013346,112.955078 299.782227,115.947266 C292.551107,118.939453 288.935547,124.42513 288.935547,132.404297 L288.935547,132.404297 L288.935547,170.554688 L213.382812,170.554688 L213.382812,95.0019531 L251.533203,95.0019531 C259.51237,95.0019531 264.998047,91.3863932 267.990234,84.1552734 C270.982422,76.9241536 269.735677,70.3164062 264.25,64.3320312 L264.25,64.3320312 L205.154297,5.23632812 C201.663411,1.74544271 197.424479,0 192.4375,0 C187.450521,0 183.211589,1.74544271 179.720703,5.23632812 L179.720703,5.23632812 L120.625,64.3320312 C114.640625,70.3164062 113.269206,76.9241536 116.510742,84.1552734 C119.752279,91.3863932 125.36263,95.0019531 133.341797,95.0019531 L133.341797,95.0019531 L171.492188,95.0019531 L171.492188,170.554688 L95.9394531,170.554688 L95.9394531,132.404297 C95.9394531,124.42513 92.3238932,118.814779 85.0927734,115.573242 C77.8616536,112.331706 71.2539062,113.703125 65.2695312,119.6875 L65.2695312,119.6875 L6.17382812,178.783203 C2.68294271,182.274089 0.9375,186.513021 0.9375,191.5 C0.9375,196.486979 2.68294271,200.725911 6.17382812,204.216797 L6.17382812,204.216797 L65.2695312,263.3125 C71.2539062,268.798177 77.8616536,270.044922 85.0927734,267.052734 C92.3238932,264.060547 95.9394531,258.57487 95.9394531,250.595703 L95.9394531,250.595703 L95.9394531,212.445312 L171.492188,212.445312 L171.492188,287.998047 L133.341797,287.998047 C125.36263,287.998047 119.876953,291.613607 116.884766,298.844727 C113.892578,306.075846 115.139323,312.683594 120.625,318.667969 L120.625,318.667969 L179.720703,377.763672 C183.211589,381.254557 187.450521,383 192.4375,383 Z'%3E%3C/path%3E%3C/g%3E%3C/svg%3E");width:11px;height:11px;background-size:cover;background-repeat:no-repeat}.arrow-down{position:absolute;right:5px;top:0}.arrow-down svg{width:8px;margin-top:5px;margin-left:5px;opacity:0.4}.cell-value-wrapper{margin-right:10px;overflow:hidden;text-overflow:ellipsis}.revo-button{position:relative;overflow:hidden;color:#fff;background-color:#4545ff;height:32px;line-height:32px;padding:0 15px;outline:0;border:0;border-radius:7px;box-sizing:border-box;cursor:pointer}.revo-button.green{background-color:#009037}.revo-button.red{background-color:#E0662E}.revo-button:disabled,.revo-button[disabled]{cursor:not-allowed !important;filter:opacity(0.35) !important}.revo-button.outline{border:1px solid #dbdbdb;line-height:30px;background:none;color:#000;box-shadow:none}revo-grid[theme^=dark] .revo-button.outline{border:1px solid #404040;color:#d8d8d8}revo-grid[theme=default],revo-grid:not([theme]){border:1px solid var(--revo-grid-header-border);font-size:12px}revo-grid[theme=default] .rowHeaders revogr-header,revo-grid:not([theme]) .rowHeaders revogr-header{box-shadow:-1px 0 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] revogr-header,revo-grid:not([theme]) revogr-header{text-align:center;line-height:30px;background-color:var(--revo-grid-header-bg)}revo-grid[theme=default] revogr-header .group-rgRow,revo-grid:not([theme]) revogr-header .group-rgRow{box-shadow:none}revo-grid[theme=default] revogr-header .group-rgRow .rgHeaderCell,revo-grid:not([theme]) revogr-header .group-rgRow .rgHeaderCell{box-shadow:-1px 0 0 0 var(--revo-grid-header-border), -1px 0 0 0 var(--revo-grid-header-border) inset, 0 -1px 0 0 var(--revo-grid-header-border), 0 -1px 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] revogr-header .header-rgRow,revo-grid[theme=default] revogr-header .group-rgRow,revo-grid:not([theme]) revogr-header .header-rgRow,revo-grid:not([theme]) revogr-header .group-rgRow{text-transform:uppercase;font-size:12px;color:var(--revo-grid-header-color)}revo-grid[theme=default] revogr-header .header-rgRow,revo-grid:not([theme]) revogr-header .header-rgRow{height:30px;box-shadow:0 -1px 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] revogr-header .rgHeaderCell,revo-grid:not([theme]) revogr-header .rgHeaderCell{box-shadow:-1px 0 0 0 var(--revo-grid-header-border) inset, 0 -1px 0 0 var(--revo-grid-header-border), 0 -1px 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] .rowHeaders,revo-grid:not([theme]) .rowHeaders{background-color:var(--revo-grid-header-bg)}revo-grid[theme=default] .rowHeaders revogr-data .rgCell,revo-grid:not([theme]) .rowHeaders revogr-data .rgCell{color:var(--revo-grid-header-color)}revo-grid[theme=default] .rowHeaders revogr-data .rgCell:first-child,revo-grid:not([theme]) .rowHeaders revogr-data .rgCell:first-child{box-shadow:0 -1px 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] .rowHeaders revogr-data .rgCell:not(:first-child),revo-grid:not([theme]) .rowHeaders revogr-data .rgCell:not(:first-child){box-shadow:0 -1px 0 0 var(--revo-grid-header-border) inset, 1px 0 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] .rowHeaders revogr-data .rgCell:last-child,revo-grid:not([theme]) .rowHeaders revogr-data .rgCell:last-child{border-right:1px solid var(--revo-grid-header-border)}revo-grid[theme=default] .rowHeaders revogr-data revogr-header,revo-grid:not([theme]) .rowHeaders revogr-data revogr-header{box-shadow:0 -1px 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] revogr-viewport-scroll.colPinStart revogr-data .rgRow .rgCell:last-child,revo-grid:not([theme]) revogr-viewport-scroll.colPinStart revogr-data .rgRow .rgCell:last-child{box-shadow:0 -1px 0 0 var(--revo-grid-cell-border) inset, -1px 0 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] revogr-viewport-scroll.colPinStart .footer-wrapper revogr-data .rgRow:first-child .rgCell,revo-grid:not([theme]) revogr-viewport-scroll.colPinStart .footer-wrapper revogr-data .rgRow:first-child .rgCell{box-shadow:0 1px 0 0 var(--revo-grid-header-border) inset, -1px 0 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] revogr-viewport-scroll.colPinEnd,revo-grid[theme=default] revogr-viewport-scroll.colPinEnd revogr-header,revo-grid:not([theme]) revogr-viewport-scroll.colPinEnd,revo-grid:not([theme]) revogr-viewport-scroll.colPinEnd revogr-header{box-shadow:1px 0 0 var(--revo-grid-header-border) inset}revo-grid[theme=default] .footer-wrapper revogr-data .rgRow:first-child .rgCell,revo-grid:not([theme]) .footer-wrapper revogr-data .rgRow:first-child .rgCell{box-shadow:0 1px 0 0 var(--revo-grid-cell-border) inset, -1px 0 0 0 var(--revo-grid-cell-border) inset, 0 -1px 0 0 var(--revo-grid-cell-border) inset}revo-grid[theme=default] revogr-data,revo-grid:not([theme]) revogr-data{text-align:center}revo-grid[theme=default] revogr-data .revo-draggable,revo-grid:not([theme]) revogr-data .revo-draggable{float:left}revo-grid[theme=default] revogr-data .rgRow,revo-grid:not([theme]) revogr-data .rgRow{line-height:27px}revo-grid[theme=default] revogr-data .rgCell,revo-grid:not([theme]) revogr-data .rgCell{box-shadow:0 -1px 0 0 var(--revo-grid-cell-border) inset, -1px 0 0 0 var(--revo-grid-cell-border) inset}revo-grid[theme=material]{font-family:Nunito, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}revo-grid[theme=material] revogr-header{line-height:50px;font-weight:600;text-align:left}revo-grid[theme=material] revogr-header .rgHeaderCell{padding:0 15px;text-overflow:ellipsis}revo-grid[theme=material] revogr-header .header-rgRow{height:50px}revo-grid[theme=material] revogr-data{text-align:left}revo-grid[theme=material] revogr-data .rgRow{line-height:42px}revo-grid[theme=material] revogr-data .rgCell{padding:0 15px}revo-grid[theme=darkMaterial]{font-family:Nunito, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}revo-grid[theme=darkMaterial] revogr-header{line-height:50px;font-weight:600;text-align:left}revo-grid[theme=darkMaterial] revogr-header .rgHeaderCell{padding:0 15px;text-overflow:ellipsis}revo-grid[theme=darkMaterial] revogr-header .header-rgRow{height:50px}revo-grid[theme=darkMaterial] revogr-data{text-align:left}revo-grid[theme=darkMaterial] revogr-data .rgRow{line-height:42px}revo-grid[theme=darkMaterial] revogr-data .rgCell{padding:0 15px}revo-grid[theme=darkCompact]{font-family:Nunito, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}revo-grid[theme=darkCompact] revogr-header{line-height:45px;font-weight:600;text-align:left}revo-grid[theme=darkCompact] revogr-header .rgHeaderCell{padding:0 15px;text-overflow:ellipsis}revo-grid[theme=darkCompact] revogr-header .header-rgRow{height:45px}revo-grid[theme=darkCompact] revogr-data{text-align:left}revo-grid[theme=darkCompact] revogr-data .rgRow{line-height:32px}revo-grid[theme=darkCompact] revogr-data .rgCell{padding:0 15px}revo-grid[theme=compact]{font-family:Nunito, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}revo-grid[theme=compact] revogr-header{line-height:45px;font-weight:600;text-align:left}revo-grid[theme=compact] revogr-header .rgHeaderCell{padding:0 15px;text-overflow:ellipsis}revo-grid[theme=compact] revogr-header .header-rgRow{height:45px}revo-grid[theme=compact] revogr-data{text-align:left}revo-grid[theme=compact] revogr-data .rgRow{line-height:32px}revo-grid[theme=compact] revogr-data .rgCell{padding:0 15px}revo-grid[theme=compact] revo-dropdown .rv-dr-root{padding:0px 9px}revo-grid{--revo-grid-primary:#266ae8;--revo-grid-primary-transparent:rgba(38, 106, 232, 0.9);--revo-grid-background:#fff;--revo-grid-foreground:black;--revo-grid-divider:gray;--revo-grid-shadow:rgba(0, 0, 0, 0.15);--revo-grid-text:black;--revo-grid-border:rgba(0, 0, 0, 0.2);--revo-grid-filter-panel-bg:#fff;--revo-grid-filter-panel-border:#d9d9d9;--revo-grid-filter-panel-shadow:rgba(0, 0, 0, 0.15);--revo-grid-filter-panel-input-bg:#eaeaeb;--revo-grid-filter-panel-divider:#d9d9d9;--revo-grid-filter-panel-select-border:transparent;--revo-grid-filter-panel-select-border-hover:transparent;--revo-grid-header-bg:#f8f9fa;--revo-grid-header-color:#000;--revo-grid-header-border:#cecece;--revo-grid-cell-border:#e2e3e3;--revo-grid-focused-bg:rgba(233, 234, 237, 0.5);--revo-grid-row-hover:#f1f1f1;--revo-grid-row-headers-bg:#f7faff;--revo-grid-row-headers-color:#757a82;--revo-grid-cell-disabled-bg:rgba(0, 0, 0, 0.07);display:flex !important;height:100%;min-height:300px;font-family:Helvetica, Arial, Sans-Serif, serif;font-size:14px;position:relative;color:var(--revo-grid-text);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column;width:100%;height:100%}revo-grid[theme*=dark]{--revo-grid-background:#212529;--revo-grid-foreground:#fff;--revo-grid-text:rgba(255, 255, 255, 0.9);--revo-grid-divider:#505050;--revo-grid-border:rgba(255, 255, 255, 0.2);--revo-grid-filter-panel-bg:#212529;--revo-grid-filter-panel-border:#505050;--revo-grid-filter-panel-input-bg:#343a40;--revo-grid-filter-panel-divider:#505050;--revo-grid-header-bg:#343a40;--revo-grid-header-color:#fff;--revo-grid-header-border:#505050;--revo-grid-cell-border:#424242;--revo-grid-focused-bg:rgba(52, 58, 64, 0.5);--revo-grid-row-hover:rgba(80, 80, 80, 0.5);--revo-grid-row-headers-bg:rgba(52, 58, 64, 0.8);--revo-grid-row-headers-color:rgba(255, 255, 255, 0.8);--revo-grid-cell-disabled-bg:rgba(255, 255, 255, 0.07)}revo-grid revogr-header .header-rgRow.group{box-shadow:0 -1px 0 0 var(--revo-grid-header-border) inset}revo-grid revogr-header .header-rgRow:not(.group){box-shadow:0 -1px 0 0 var(--revo-grid-header-border), 0 -1px 0 0 var(--revo-grid-header-border) inset}revo-grid revogr-header .rgHeaderCell.sortable:hover{background-color:var(--revo-grid-row-hover)}revo-grid revogr-header .rgHeaderCell.focused-cell{background:var(--revo-grid-focused-bg)}revo-grid .footer-wrapper revogr-data{box-shadow:0 -1px 0 var(--revo-grid-cell-border)}revo-grid revogr-viewport-scroll.colPinStart{box-shadow:-1px 0 0 var(--revo-grid-cell-border) inset}revo-grid revogr-viewport-scroll.colPinEnd{box-shadow:-1px 0 0 var(--revo-grid-cell-border)}revo-grid revogr-data .rgRow{box-shadow:0 -1px 0 0 var(--revo-grid-cell-border) inset}revo-grid revogr-data .rgRow.focused-rgRow{background-color:var(--revo-grid-focused-bg)}revo-grid revogr-data .rgCell{color:var(--revo-grid-text)}revo-grid revogr-data .rgCell.disabled{background-color:var(--revo-grid-cell-disabled-bg)}revo-grid .attribution{position:absolute;bottom:0;left:0;right:0;z-index:1000;width:0;height:0;border-left:4px solid var(--revo-grid-primary-transparent);border-bottom:4px solid var(--revo-grid-primary-transparent);border-top:4px solid transparent;border-right:4px solid transparent;cursor:pointer}revo-grid .attribution .value{position:absolute;bottom:0;left:0;background-color:var(--revo-grid-background);padding:4px;border-radius:4px;box-shadow:0 1px 10px var(--revo-grid-border);white-space:nowrap;text-decoration:none;color:var(--revo-grid-text);letter-spacing:0.3px;font-size:11px;opacity:0;width:4px;overflow:hidden;transition:opacity 0.5s ease-in-out, width 0.3s ease-in-out}revo-grid .attribution:hover .value{width:63px;opacity:1}revo-grid.column-draggable.column-drag-start:hover,revo-grid.column-draggable.column-drag-start *:hover{cursor:grabbing}revo-grid .footer-wrapper,revo-grid .header-wrapper{width:100%}revo-grid .footer-wrapper revogr-data,revo-grid .header-wrapper revogr-data{z-index:3}revo-grid revo-dropdown{width:100%}revo-grid revo-dropdown .rv-dr-root{max-height:100%}revo-grid revo-dropdown.shrink label{opacity:0}revo-grid .viewports{max-width:100%;display:flex;flex-direction:row;align-items:flex-start;flex-grow:1}revo-grid .main-viewport{flex-grow:1;height:0;display:flex;justify-content:space-between;flex-direction:row}revo-grid .draggable{position:fixed;height:30px;line-height:30px;background:var(--revo-grid-background);border-radius:3px;display:block;z-index:100;margin-top:5px;margin-right:-20px;box-shadow:0 4px 20px 0 var(--revo-grid-shadow);padding-left:20px;padding-right:5px}revo-grid .draggable.hidden{display:none}revo-grid .draggable .revo-alt-icon{background-color:var(--revo-grid-foreground);position:absolute;left:5px;top:10px}revo-grid .draggable-wrapper.hidden{display:none}revo-grid .drag-position{position:absolute;left:0;right:0;height:1px;z-index:2;background:var(--revo-grid-divider);pointer-events:none}revo-grid .drag-position-y{position:absolute;top:0;left:0;bottom:0;width:1px;z-index:2;background:var(--revo-grid-divider);pointer-events:none}revo-grid .drag-auto-scroll-y{pointer-events:none;position:absolute;left:0;top:0;height:50px;width:1px}revo-grid .clipboard{position:absolute;left:0;top:0}revo-grid revogr-scroll-virtual{position:relative}revo-grid revogr-scroll-virtual.vertical,revo-grid revogr-scroll-virtual.horizontal{z-index:3}`,Le=class{constructor(t){O(this,t),this.contentsizechanged=c(this,"contentsizechanged",7),this.beforeedit=c(this,"beforeedit",7),this.beforerangeedit=c(this,"beforerangeedit",7),this.afteredit=c(this,"afteredit",7),this.beforeautofill=c(this,"beforeautofill",7),this.beforerange=c(this,"beforerange",7),this.afterfocus=c(this,"afterfocus",7),this.roworderchanged=c(this,"roworderchanged",7),this.beforesorting=c(this,"beforesorting",7),this.beforesourcesortingapply=c(this,"beforesourcesortingapply",7),this.beforesortingapply=c(this,"beforesortingapply",7),this.rowdragstart=c(this,"rowdragstart",7),this.headerclick=c(this,"headerclick",7),this.beforecellfocus=c(this,"beforecellfocus",7),this.beforefocuslost=c(this,"beforefocuslost",7),this.beforesourceset=c(this,"beforesourceset",7),this.beforeanysource=c(this,"beforeanysource",7),this.aftersourceset=c(this,"aftersourceset",7),this.afteranysource=c(this,"afteranysource",7),this.beforecolumnsset=c(this,"beforecolumnsset",7),this.beforecolumnapplied=c(this,"beforecolumnapplied",7),this.aftercolumnsset=c(this,"aftercolumnsset",7),this.beforefilterapply=c(this,"beforefilterapply",7),this.beforefiltertrimmed=c(this,"beforefiltertrimmed",7),this.beforetrimmed=c(this,"beforetrimmed",7),this.aftertrimmed=c(this,"aftertrimmed",7),this.viewportscroll=c(this,"viewportscroll",7),this.beforeexport=c(this,"beforeexport",7),this.beforeeditstart=c(this,"beforeeditstart",7),this.aftercolumnresize=c(this,"aftercolumnresize",7),this.beforerowdefinition=c(this,"beforerowdefinition",7),this.filterconfigchanged=c(this,"filterconfigchanged",7),this.sortingconfigchanged=c(this,"sortingconfigchanged",7),this.rowheaderschanged=c(this,"rowheaderschanged",7),this.beforegridrender=c(this,"beforegridrender",7),this.aftergridrender=c(this,"aftergridrender",7),this.aftergridinit=c(this,"aftergridinit",7),this.additionaldatachanged=c(this,"additionaldatachanged",7),this.afterthemechanged=c(this,"afterthemechanged",7),this.created=c(this,"created",7),this.frameSize=1,this.rowSize=0,this.colSize=100,this.range=!1,this.readonly=!1,this.resize=!1,this.canFocus=!0,this.useClipboard=!0,this.columns=[],this.source=[],this.pinnedTopSource=[],this.pinnedBottomSource=[],this.rowDefinitions=[],this.editors={},this.applyOnClose=!1,this.plugins=[],this.columnTypes={},this.theme="default",this.rowClass="",this.autoSizeColumn=!1,this.filter=!1,this.canMoveColumns=!1,this.trimmedRows={},this.exporting=!1,this.stretch=!1,this.additionalData={},this.disableVirtualX=!1,this.disableVirtualY=!1,this.hideAttribution=!1,this.jobsBeforeRender=[],this.registerVNode=[],this.accessible=!0,this.canDrag=!0,this.extraElements=[],this.pluginService=new Te,this.viewport=null,this.isInited=!1}async refresh(t="all"){if(!this.dataProvider)throw new Error("Not connected");this.dataProvider.refresh(t)}async setDataAt({row:t,col:e,colType:r="rgCol",rowType:o="rgRow",val:i,skipDataUpdate:s=!1}){var n;if(this.dataProvider&&this.columnProvider&&!s){const d=(n=this.columnProvider.getColumn(e,r))===null||n===void 0?void 0:n.prop;typeof d<"u"&&this.dataProvider.setCellData({type:o,rowIndex:t,prop:d,val:i},!1)}const l=this.element.querySelector(`revogr-data[type="${o}"][col-type="${r}"]`);return l==null?void 0:l.updateCell({row:t,col:e})}async scrollToRow(t=0){if(!this.dimensionProvider)throw new Error("Not connected");const e=this.dimensionProvider.getViewPortPos({coordinate:t,dimension:"rgRow"});await this.scrollToCoordinate({y:e})}async scrollToColumnIndex(t=0){if(!this.dimensionProvider)throw new Error("Not connected");const e=this.dimensionProvider.getViewPortPos({coordinate:t,dimension:"rgCol"});await this.scrollToCoordinate({x:e})}async scrollToColumnProp(t,e="rgCol"){if(!this.dimensionProvider||!this.columnProvider)throw new Error("Not connected");const r=this.columnProvider.getColumnIndexByProp(t,e);if(r<0)return;const o=this.dimensionProvider.getViewPortPos({coordinate:r,dimension:e});await this.scrollToCoordinate({x:o})}async updateColumns(t){var e;(e=this.columnProvider)===null||e===void 0||e.updateColumns(t)}async addTrimmed(t,e="external",r="rgRow"){if(!this.dataProvider)throw new Error("Not connected");const o=this.beforetrimmed.emit({trimmed:t,trimmedType:e,type:r});return o.defaultPrevented||(this.dataProvider.setTrimmed({[e]:o.detail.trimmed},r),this.aftertrimmed.emit()),o}async scrollToCoordinate(t){var e;(e=this.viewport)===null||e===void 0||e.scrollToCell(t)}async setCellEdit(t,e,r="rgRow"){var o;const i=V(this.columns,e);if(!i)return;await E();const s=i.pin||"rgCol";if(!this.columnProvider)throw new Error("Not connected");(o=this.viewport)===null||o===void 0||o.setEdit(t,this.columnProvider.getColumnIndexByProp(e,s),s,r)}async setCellsFocus(t={x:0,y:0},e={x:0,y:0},r="rgCol",o="rgRow"){var i;(i=this.viewport)===null||i===void 0||i.setFocus(r,o,t,e)}async getSource(t="rgRow"){if(!this.dataProvider)throw new Error("Not connected");return this.dataProvider.stores[t].store.get("source")}async getVisibleSource(t="rgRow"){if(!this.dataProvider)throw new Error("Not connected");return z(this.dataProvider.stores[t].store)}async getSourceStore(t="rgRow"){if(!this.dataProvider)throw new Error("Not connected");return this.dataProvider.stores[t].store}async getColumnStore(t="rgCol"){if(!this.columnProvider)throw new Error("Not connected");return this.columnProvider.stores[t].store}async updateColumnSorting(t,e,r){this.sortingconfigchanged.emit({columns:[{prop:t.prop,order:e,cellCompare:t.cellCompare}],additive:r})}async clearSorting(){this.sortingconfigchanged.emit({columns:[]})}async getColumns(){if(!this.columnProvider)throw new Error("Not connected");return this.columnProvider.getColumns()}async clearFocus(){var t,e;const r=(t=this.viewport)===null||t===void 0?void 0:t.getFocused();this.beforefocuslost.emit(r).defaultPrevented||(e=this.selectionStoreConnector)===null||e===void 0||e.clearAll()}async getPlugins(){return this.pluginService.get()}async getFocused(){var t,e;return(e=(t=this.viewport)===null||t===void 0?void 0:t.getFocused())!==null&&e!==void 0?e:null}async getContentSize(){var t;if(!this.dimensionProvider)throw new Error("Not connected");return(t=this.dimensionProvider)===null||t===void 0?void 0:t.getFullSize()}async getSelectedRange(){var t,e;return(e=(t=this.viewport)===null||t===void 0?void 0:t.getSelectedRange())!==null&&e!==void 0?e:null}async refreshExtraElements(){var t;(t=this.extraService)===null||t===void 0||t.refresh()}async getProviders(){return this.getPluginData()}mousedownHandle(t){const e=P(t,"screenX"),r=P(t,"screenY");e===null||r===null||(this.clickTrackForFocusClear=e+r)}async mouseupHandle(t){var e;const r=P(t,"screenX"),o=P(t,"screenY");if(r===null||o===null||t.defaultPrevented)return;const i=r+o;if(Math.abs(((e=this.clickTrackForFocusClear)!==null&&e!==void 0?e:0)-i)>10)return;const s=t.composedPath();!s.includes(this.element)&&!(this.element.shadowRoot&&s.includes(this.element.shadowRoot))&&await this.clearFocus()}onRowDragStarted(t){var e;const r=this.rowdragstart.emit(t.detail);if(r.defaultPrevented){t.preventDefault();return}(e=this.orderService)===null||e===void 0||e.start(this.element,Object.assign(Object.assign({},t.detail),r.detail))}onRowDragEnd(){var t;(t=this.orderService)===null||t===void 0||t.end()}onRowOrderChange(t){var e;(e=this.dataProvider)===null||e===void 0||e.changeOrder(t.detail)}onRowDrag({detail:t}){var e;(e=this.orderService)===null||e===void 0||e.move(t)}onRowMouseMove(t){var e;(e=this.orderService)===null||e===void 0||e.moveTip(t.detail)}async onCellEdit(t){var e;const{defaultPrevented:r,detail:o}=this.beforeedit.emit(t.detail);await E(),r||((e=this.dataProvider)===null||e===void 0||e.setCellData(o),this.afteredit.emit(o))}onRangeEdit(t){if(!this.dataProvider)throw new Error("Not connected");const{defaultPrevented:e,detail:r}=this.beforerangeedit.emit(t.detail);if(e){t.preventDefault();return}this.dataProvider.setRangeData(r.data,r.type),this.afteredit.emit(r)}onRangeChanged(t){const e=this.beforerange.emit(t.detail);e.defaultPrevented&&t.preventDefault(),this.beforeautofill.emit(e.detail).defaultPrevented&&t.preventDefault()}onRowDropped(t){const{defaultPrevented:e}=this.roworderchanged.emit(t.detail);e&&t.preventDefault()}onHeaderClick(t){const{defaultPrevented:e}=this.headerclick.emit(Object.assign(Object.assign({},t.detail.column),{originalEvent:t.detail.originalEvent}));e&&t.preventDefault()}onCellFocus(t){const{defaultPrevented:e}=this.beforecellfocus.emit(t.detail);(!this.canFocus||e)&&t.preventDefault()}columnTypesChanged(){this.columnChanged(this.columns)}columnChanged(t=[],e=void 0,r="columns",o=!1){if(!this.dimensionProvider||!this.columnProvider)return;const i=H(t,0,this.columnTypes),s=this.beforecolumnsset.emit(i);if(s.defaultPrevented)return;this.dimensionProvider.applyNewColumns(s.detail.columns,this.disableVirtualX,o);const n=this.beforecolumnapplied.emit(i);if(n.defaultPrevented)return;const l=this.columnProvider.setColumns(n.detail);this.aftercolumnsset.emit({columns:l,order:Object.entries(n.detail.sort).reduce((d,[g,a])=>(d[g]=a.order,d),{})})}disableVirtualXChanged(t=!1,e=!1){t!==e&&this.columnChanged(this.columns)}rowSizeChanged(t){this.dimensionProvider&&(this.dimensionProvider.setSettings({originItemSize:t},"rgRow"),this.rowDefChanged(this.rowDefinitions,this.rowDefinitions,"rowSize",!0))}themeChanged(t,e,r="theme",o=!1){this.dimensionProvider&&(this.themeService.register(t),this.dimensionProvider.setSettings({originItemSize:this.themeService.rowSize},"rgRow"),this.dimensionProvider.setSettings({originItemSize:this.colSize},"rgCol"),o||(this.dimensionProvider.setSettings({originItemSize:this.themeService.rowSize},"rgRow"),this.rowDefChanged(this.rowDefinitions,this.rowDefinitions,"theme",!0)),this.afterthemechanged.emit(t))}dataSourceChanged(t=[],e,r){if(!this.dataProvider)return;let o="rgRow";switch(r){case"pinnedBottomSource":o="rowPinEnd";break;case"pinnedTopSource":o="rowPinStart";break;case"source":o="rgRow",t=this.beforesourceset.emit({type:o,source:t}).detail.source;break}const s=[...this.beforeanysource.emit({type:o,source:t}).detail.source];this.dataProvider.setData(s,o,this.disableVirtualY),r==="source"&&this.aftersourceset.emit({type:o,source:t}),this.afteranysource.emit({type:o,source:t})}disableVirtualYChanged(t=!1,e=!1){t!==e&&this.dataSourceChanged(this.source,this.source,"source")}rowDefChanged(t,e,r,o=!0){if(!this.dimensionProvider||!this.dataProvider)return;const{detail:{vals:i,oldVals:s}}=this.beforerowdefinition.emit({vals:t,oldVals:e}),n=ye(i);if(s){const l=Re(s);for(const d in l)if(l.hasOwnProperty(d)){const g=d,u=this.dataProvider.stores[g].store.get("source").length;this.dimensionProvider.clearSize(g,u)}}S.forEach(l=>{var d;const g=n[l];(g||o)&&((d=this.dimensionProvider)===null||d===void 0||d.setCustomSizes(l,(g==null?void 0:g.sizes)||{}))})}trimmedRowsChanged(t={}){this.addTrimmed(t)}groupingChanged(t={}){var e;(e=this.pluginService.getByClass(T))===null||e===void 0||e.setGrouping(t||{})}applyStretch(t){if(!this.dimensionProvider||!this.dataProvider||!this.columnProvider||!this.viewportProvider)return;t==="false"&&(t=!1);const e=this.getPluginData();if(!e)return;const r=this.pluginService.getByClass(D);typeof t=="boolean"&&t||t==="true"?r?j(r)&&r.applyStretch(this.columnProvider.getRawColumns()):this.pluginService.add(new D(this.element,e)):r&&this.pluginService.remove(r)}applyFilter(t){this.filterconfigchanged.emit(t)}applySorting(t){this.sortingconfigchanged.emit(t)}rowHeadersChange(t){this.rowheaderschanged.emit(t)}registerOutsideVNodes(t=[]){this.extraElements=t}additionalDataChanged(t){this.additionaldatachanged.emit(t)}pluginsChanged(t=[],e){this.pluginService.addUserPluginsAndCreate(this.element,t,e,this.getPluginData())}setPlugins(){this.removePlugins();const t=this.getPluginData();t&&(this.setCorePlugins(t),this.pluginsChanged(this.plugins))}setCorePlugins(t){this.accessible&&this.pluginService.add(new Ee(this.element,t)),this.autoSizeColumn&&this.pluginService.add(new B(this.element,t,typeof this.autoSizeColumn=="object"?this.autoSizeColumn:void 0)),this.filter&&this.pluginService.add(new F(this.element,t,typeof this.filter=="object"?this.filter:void 0)),this.exporting&&this.pluginService.add(new A(this.element,t)),this.pluginService.add(new N(this.element,t)),this.pluginService.add(new T(this.element,t)),this.canMoveColumns&&this.pluginService.add(new M(this.element,t))}getPluginData(){return!this.dimensionProvider||!this.dataProvider||!this.columnProvider||!this.viewportProvider||!this.selectionStoreConnector?void 0:{data:this.dataProvider,column:this.columnProvider,dimension:this.dimensionProvider,viewport:this.viewportProvider,selection:this.selectionStoreConnector,plugins:this.pluginService}}removePlugins(){this.pluginService.destroy()}connectedCallback(){this.isInited&&this.setPlugins(),this.created.emit()}componentWillLoad(){var t;this.viewportProvider=new we,this.themeService=new ve({rowSize:this.rowSize}),this.dimensionProvider=new fe(this.viewportProvider,{realSizeChanged:e=>this.contentsizechanged.emit(e)}),this.columnProvider=new pe,this.selectionStoreConnector=new $,this.dataProvider=new me(this.dimensionProvider),this.registerOutsideVNodes(this.registerVNode),this.setPlugins(),this.applyStretch(this.stretch),this.themeChanged(this.theme,void 0,void 0,!0),this.columnChanged(this.columns,void 0,void 0,!0),this.dataSourceChanged(this.source,void 0,"source"),this.dataSourceChanged(this.pinnedTopSource,void 0,"pinnedTopSource"),this.dataSourceChanged(this.pinnedBottomSource,void 0,"pinnedBottomSource"),Object.keys((t=this.trimmedRows)!==null&&t!==void 0?t:{}).length>0&&this.trimmedRowsChanged(this.trimmedRows),this.rowDefChanged(this.rowDefinitions),this.grouping&&Object.keys(this.grouping).length>0&&this.groupingChanged(this.grouping),this.scrollingService=new Se(e=>{var r;(r=this.dimensionProvider)===null||r===void 0||r.setViewPortCoordinate({coordinate:e.coordinate,type:e.dimension}),this.viewportscroll.emit(e)}),this.aftergridinit.emit(),this.isInited=!0}componentWillRender(){return this.beforegridrender.emit().defaultPrevented?!1:Promise.all(this.jobsBeforeRender)}componentDidRender(){this.aftergridrender.emit()}render(){if(!this.dimensionProvider||!this.dataProvider||!this.columnProvider||!this.viewportProvider||!this.selectionStoreConnector)return;const t=this.dimensionProvider.stores.rgRow.store.get("realSize");this.viewport=new Ce({columnProvider:this.columnProvider,dataProvider:this.dataProvider,dimensionProvider:this.dimensionProvider,viewportProvider:this.viewportProvider,scrollingService:this.scrollingService,orderService:this.orderService,selectionStoreConnector:this.selectionStoreConnector,disableVirtualX:this.disableVirtualX,disableVirtualY:this.disableVirtualY,resize:a=>this.aftercolumnresize.emit(a)},t);const e=[];if(this.rowHeaders&&this.viewport.columns.length){const a=this.viewport.columns[0];e.push(v("revogr-row-headers",{additionalData:this.additionalData,height:t,rowClass:this.rowClass,resize:this.resize,dataPorts:a.dataPorts,headerProp:a.headerProp,jobsBeforeRender:this.jobsBeforeRender,rowHeaderColumn:typeof this.rowHeaders=="object"?this.rowHeaders:void 0,onScrollview:({detail:u})=>this.scrollingService.proxyScroll(u,"headerRow"),onRef:({detail:u})=>this.scrollingService.registerElement(u,"headerRow")}))}const r=ze(),o=[];for(let a of this.viewport.columns){const u=Object.assign(Object.assign({},a.headerProp),{type:a.type,additionalData:this.additionalData,viewportCol:a.viewportCol,selectionStore:a.columnSelectionStore,canResize:this.resize,readonly:this.readonly,columnFilter:!!this.filter}),x=[v("revogr-header",Object.assign({},u,{slot:I}))];a.dataPorts.forEach(h=>{const m=`${h.type}_${a.type}`,f=v("revogr-overlay-selection",Object.assign({},h,{canDrag:this.canDrag&&h.canDrag,isMobileDevice:r,onSelectall:()=>{var p;return(p=this.selectionStoreConnector)===null||p===void 0?void 0:p.selectAll()},editors:this.editors,readonly:this.readonly,range:this.range,useClipboard:this.useClipboard,applyChangesOnClose:this.applyOnClose,additionalData:this.additionalData,slot:h.slot,onBeforenextvpfocus:p=>{var b;return(b=this.selectionStoreConnector)===null||b===void 0?void 0:b.beforeNextFocusCell(p.detail)},onCanceledit:()=>{var p;return(p=this.selectionStoreConnector)===null||p===void 0?void 0:p.setEdit(!1)},onSetedit:({detail:p})=>{var b;this.beforeeditstart.emit(p).defaultPrevented||(b=this.selectionStoreConnector)===null||b===void 0||b.setEdit(p.val)}}),v("revogr-data",Object.assign({},h,{colType:a.type,key:m,readonly:this.readonly,range:this.range,rowClass:this.rowClass,rowSelectionStore:h.rowSelectionStore,additionalData:this.additionalData,jobsBeforeRender:this.jobsBeforeRender,slot:se}),v("slot",{name:`data-${a.type}-${h.type}`})),v("revogr-temp-range",{selectionStore:h.selectionStore,dimensionRow:h.dimensionRow,dimensionCol:h.dimensionCol}),v("revogr-focus",{colData:h.colData,dataStore:h.dataStore,focusTemplate:this.focusTemplate,rowType:h.type,colType:a.type,selectionStore:h.selectionStore,dimensionRow:h.dimensionRow,dimensionCol:h.dimensionCol},v("slot",{name:`focus-${a.type}-${h.type}`})));x.push(f)}),o.push(v("revogr-viewport-scroll",Object.assign({},a.prop,{ref:h=>this.scrollingService.registerElement(h,`${a.prop.key}`),onScrollviewport:h=>this.scrollingService.proxyScroll(h.detail,`${a.prop.key}`),onScrollviewportsilent:h=>this.scrollingService.scrollSilentService(h.detail,`${a.prop.key}`)}),x))}e.push(o);const i="rgRow",s="rgCol",n=this.viewportProvider.stores,l=this.dimensionProvider.stores,d=v("revogr-scroll-virtual",{class:"vertical",dimension:i,clientSize:n[i].store.get("clientSize"),virtualSize:n[i].store.get("virtualSize"),realSize:l[i].store.get("realSize"),ref:a=>this.scrollingService.registerElement(a,"rowScroll"),onScrollvirtual:a=>this.scrollingService.proxyScroll(a.detail)}),g=v("revogr-scroll-virtual",{class:"horizontal",dimension:s,clientSize:n[s].store.get("clientSize"),virtualSize:n[s].store.get("virtualSize"),realSize:l[s].store.get("realSize"),ref:a=>this.scrollingService.registerElement(a,"colScroll"),onScrollvirtual:a=>this.scrollingService.proxyScroll(a.detail)});return v(U,null,this.hideAttribution?null:v("revogr-attribution",{class:"attribution"}),v("slot",{name:"header"}),v("div",{class:"main-viewport",onClick:a=>{var u;a.currentTarget===a.target&&((u=this.viewport)===null||u===void 0||u.clearEdit())}},v("div",{class:"viewports"},v("slot",{name:"viewport"}),e,d,v(Pe,{ref:a=>this.orderService=a}))),g,v("revogr-extra",{ref:a=>this.extraService=a,nodes:this.extraElements}),v("slot",{name:"footer"}))}disconnectedCallback(){this.removePlugins()}get element(){return Y(this)}static get watchers(){return{columnTypes:["columnTypesChanged"],columns:["columnChanged"],disableVirtualX:["disableVirtualXChanged"],rowSize:["rowSizeChanged"],theme:["themeChanged"],source:["dataSourceChanged"],pinnedBottomSource:["dataSourceChanged"],pinnedTopSource:["dataSourceChanged"],disableVirtualY:["disableVirtualYChanged"],rowDefinitions:["rowDefChanged"],trimmedRows:["trimmedRowsChanged"],grouping:["groupingChanged"],stretch:["applyStretch"],filter:["applyFilter"],sorting:["applySorting"],rowHeaders:["rowHeadersChange"],registerVNode:["registerOutsideVNodes"],additionalData:["additionalDataChanged"],plugins:["pluginsChanged"]}}};Le.style=De;export{Le as revo_grid};
