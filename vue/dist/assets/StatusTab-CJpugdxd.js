import{_ as v,H as u,c as f,b as l,g as s,w as n,F as x,d as y,r as _,o as b,h as r,t as C}from"./index-C7Bt6Lao.js";const h={name:"StatusTab",data(){return{status_text:"",camera_image:null,selectedFormat:"html"}},methods:{download_db(){u.get("/download_db",{responseType:"blob"}).then(t=>{const e=new Blob([t.data],{type:"application/octet-stream"}),o=document.createElement("a");o.href=URL.createObjectURL(e),o.download=document.title+"_replifactory.db",document.body.appendChild(o),o.click(),document.body.removeChild(o)}).catch(t=>{console.error(t)})},get_info(){u.get("/status").then(t=>{this.status_text=`<pre>${JSON.stringify(t.data,null,2)}</pre>`}).catch(t=>{console.error(t)})},export_data(t,e){u.get(`/export/${t}/${e}`,{responseType:"blob"}).then(o=>{const c=new Blob([o.data],{type:"application/octet-stream"}),a=document.createElement("a");a.href=URL.createObjectURL(c),a.download=`vial_${t}_data.${e}`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}).catch(o=>{console.error(o)})},capture_image(){u.get("/capture",{responseType:"arraybuffer"}).then(t=>{const e=btoa(new Uint8Array(t.data).reduce((o,c)=>o+String.fromCharCode(c),""));this.camera_image="data:image/jpeg;base64,"+e}).catch(t=>{console.error(t)})}}},k={class:"d-flex justify-content-start mt-3"},w={class:"d-flex flex-wrap mt-3"},T={class:"mt-3"},L=["src"],V=["innerHTML"];function F(t,e,o,c,a,i){const p=_("v-icon"),m=_("v-btn"),g=_("v-select");return b(),f("div",null,[l("div",k,[s(m,{color:"info",class:"mr-3",onClick:i.capture_image},{default:n(()=>[s(p,{size:"large"},{default:n(()=>e[1]||(e[1]=[r("mdi-camera")])),_:1}),e[2]||(e[2]=r(" photo "))]),_:1},8,["onClick"]),s(m,{color:"success",class:"mr-3",onClick:i.download_db},{default:n(()=>[s(p,{size:"large"},{default:n(()=>e[3]||(e[3]=[r("mdi-cloud-download")])),_:1}),e[4]||(e[4]=r(" download database "))]),_:1},8,["onClick"]),s(m,{color:"primary",onClick:i.get_info},{default:n(()=>[s(p,{size:"large"},{default:n(()=>e[5]||(e[5]=[r("mdi-information")])),_:1})]),_:1},8,["onClick"])]),l("div",w,[e[6]||(e[6]=l("div",{class:"d-flex align-items-center mr-3"}," Export Data ",-1)),s(g,{modelValue:a.selectedFormat,"onUpdate:modelValue":e[0]||(e[0]=d=>a.selectedFormat=d),items:["csv","html"],label:"Please select a format",class:"mr-3"},null,8,["modelValue"]),l("div",null,[(b(),f(x,null,y(7,d=>s(m,{color:"info",key:"vial"+d,class:"mr-1",onClick:U=>i.export_data(d,a.selectedFormat)},{default:n(()=>[r(" Vial "+C(d),1)]),_:2},1032,["onClick"])),64))])]),l("div",T,[l("img",{src:a.camera_image,class:"img-fluid"},null,8,L)]),l("div",{class:"mt-3",innerHTML:a.status_text},null,8,V)])}const S=v(h,[["render",F],["__scopeId","data-v-b1154d2a"]]);export{S as default};
