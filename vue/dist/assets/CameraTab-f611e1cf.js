import{_ as y,k as d,r,o as m,c as _,f as o,q as s,s as p,a as C,d as b,l as a,S as h}from"./index-dba55fd0.js";const w={key:0,class:"mt-3"},x=["src"],k={__name:"CameraTab",setup(N){const n=d(null),t=d(!1);async function f(){var c;if(t.value){a("Camera capture already in progress...",{type:"warning"});return}t.value=!0;try{a("Capturing image...",{type:"info"});const e=await h.get("/camera/capture",{responseType:"arraybuffer",timeout:15e3}),l=btoa(new Uint8Array(e.data).reduce((i,u)=>i+String.fromCharCode(u),""));n.value=`data:image/jpeg;base64,${l}`,a("Image captured successfully!",{type:"success"})}catch(e){console.error("Error capturing image:",e),e.code==="ECONNABORTED"||e.message.includes("timeout")?a("Camera capture timed out - this might indicate the camera is busy or needs reset",{type:"error"}):((c=e.response)==null?void 0:c.status)===500?a("Camera error - please try rebooting the device",{type:"error"}):a("Failed to capture image - check camera connection",{type:"error"}),n.value=null}finally{t.value=!1}}return(c,e)=>{const l=r("v-icon"),i=r("v-btn"),u=r("v-col"),g=r("v-row"),v=r("v-card");return m(),_("div",null,[o(g,{class:"mt-3"},{default:s(()=>[o(u,{cols:"4"},{default:s(()=>[o(i,{color:"info",onClick:f,loading:t.value,disabled:t.value,size:"large"},{default:s(()=>[o(l,{size:"large"},{default:s(()=>e[0]||(e[0]=[p("mdi-camera")])),_:1}),e[1]||(e[1]=p(" Capture Photo "))]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),n.value?(m(),_("div",w,[o(v,null,{default:s(()=>[C("img",{src:n.value,class:"img-fluid",style:{"max-width":"100%",height:"auto"}},null,8,x)]),_:1})])):b("",!0)])}}},B=y(k,[["__scopeId","data-v-dfe35181"]]);export{B as default};
